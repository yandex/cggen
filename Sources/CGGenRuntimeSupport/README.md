# CGGenRuntimeSupport

This module provides runtime support for code generated by cggen, including utilities for creating images from generated descriptors.

## Image Creation Utilities

The module provides convenient initializers to create various image types from generated descriptors:

### CGImage Creation

```swift
import cggen_runtime_support

// Create a CGImage from a descriptor
if let cgImage = CGImage.draw(from: myDescriptor) {
  // Use cgImage...
}

// Create with custom scale and color space
let cgImage = CGImage.draw(
  from: myDescriptor, 
  scale: 2.0,
  colorSpace: CGColorSpaceCreateDeviceRGB()
)
```

### UIImage Creation (iOS/tvOS/watchOS)

```swift
#if canImport(UIKit)
// Create a UIImage with device scale
let uiImage = UIImage(myDescriptor)

// Create with custom scale  
let uiImage = UIImage(myDescriptor, scale: 3.0)
#endif
```

### SwiftUI Image Creation

```swift
#if canImport(SwiftUI)
// Create a SwiftUI Image
let swiftUIImage = Image(myDescriptor)

// Create with custom scale
let swiftUIImage = Image(myDescriptor, scale: 2.0)
#endif
```

## Usage with Generated Descriptors

When you generate Swift code with cggen, you get tuple descriptors like:

```swift
public let myImageDescriptor = (
  size: CGSize(width: 100.0, height: 100.0),
  draw: myImageDrawFunction
)
```

You can use these directly with the image utilities:

```swift
// Create images from the generated descriptor
if let cgImage = CGImage.draw(from: myImageDescriptor) {
  // Use cgImage...
}
let uiImage = UIImage(myImageDescriptor)
let swiftUIImage = Image(myImageDescriptor)
```

## Convenience Extensions

### CGContext Extension

```swift
// Draw a descriptor into an existing context
context.draw(myDescriptor, at: CGPoint(x: 10, y: 10))
```

## Error Handling

CGImage creation returns an optional and may fail if graphics context creation fails. UIImage and SwiftUI.Image initializers fall back to empty images if CGImage creation fails, ensuring a robust API that doesn't crash on edge cases.